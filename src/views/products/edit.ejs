<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../includes/head')  %>
</head>
<body>

    <%- include('../includes/header')  %>
    <article class="header-form">
        <h3 class="g-title">Editar producto</h2>
    </article>
    <main class="edit-product">
        <form action="/products/<%= product.id %>?m=PUT" enctype="multipart/form-data" method="POST" class="form-edit form-edicion">
            <input type="hidden" name="id" value="<%= product.id %>">
            <section class="product-description">
                <article>
                    <section>
                        <img src="/products/<%= product.imageId.url %>" alt="Cafe de colombia">
                    </section>
                    <input type="file" name="image" id="image" class="input-registro">
                </article>
                <article>
                    <section class="detail">
                        <fieldset>
                            <label for="name"><h3 class="name-detail">Nombre: <%= product.name %></h3></label>
                            <input type="text" name="name" id="name" class="input-registro" value="<%= product.name %>">
                        </fieldset>

                        <fieldset>
                            <label for="price"><p class="price price-detail">Precio: $<%= product.price %></p></label>
                            <input type="number" name="price" id="price" class="input-registro" value="<%= product.price %>">
                        </fieldset>

                        <fieldset>
                            <label for="description"><p><span>Descripción: </span> <%= product.description %></p></label>
                            <textarea name="description" id="description" cols="30" rows="2" class="input-registro"><%= product.description%></textarea>
                        </fieldset>

                        <fieldset>
                            <label for="variety"><p><span>Variedad: </span> <%= product.variety %></p></label>
                            <input type="text" name="variety" id="variety" value="<%= product.variety %>" class="input-registro">
                        </fieldset>
                        
                        <fieldset>
                           <label for="smell"><p><span>Aspeco olfativo: </span><%= product.smell %></p></label>
                           <input type="text" name="smell" id="smell" value="<%= product.smell %>" class="input-registro">
                        </fieldset>

                        <fieldset>
                            <label for="origin"><p><span>Origen: </span><%= product.origin %></p></label>
                            <input type="text" name="origin" id="origin" value="<%= product.origin %>" class="input-registro">
                         </fieldset>

                         <fieldset>
                            <label for="detail"><p><span>Reseña: </span><%= product.detail %></p></label>
                            <input type="text" name="detail" id="detail" value="<%= product.detail %>" class="input-registro">
                         </fieldset>

                         <fieldset>
                            <label for="brand"><p><span>Marca: </span><%= product.brandId.name %></p></label>
                            <select name="brand" id="brand" class="input-registro">
                                <% brand.forEach(brand => { %>
                                    <option value="<%= brand.id %>" <% if (product.brandId.name == brand.name) { %>
                                        selected
                                       <% } %>><%= brand.name %></option>
                                   <% }) %>
                            </select>
                         </fieldset>

                        <fieldset> 
                            <label for="weight"><span><p>Pesos actuales:<% product.weights.forEach(element => { %>
                                <%= element.name %>  
                            <% }) %></p></span></label>
                            <select name="weight" id="weight" multiple class="input-registro">
                                <% weight.forEach(element => { %>
                                    <option value="<%= element.id %>" <% if (product.weights.name == product.weights.name) { %>
                                        selected
                                       <% } %>><%= element.name %></option>
                                   <% }) %>
                                   
                            </select>
                       </fieldset>
                       
                       <fieldset>
                            <label for="stock"><span><p>Cantidad:</p></span></label>
                            <input type="number" name="stock" id="stock" value="<%= product.stock %>" class="input-registro">
                        </fieldset>

                        <fieldset>
                            <label for="category"><p><span>Marca: </span><%= product.categoryId.name %></p></label>
                            <select name="category" id="category" class="input-registro">
                                <% category.forEach(category => { %>
                                    <option value="<%= category.id %>" <% if (product.categoryId.name == category.name) { %>
                                        selected
                                       <% } %>><%= category.name %></option>
                                   <% }) %>
                            </select>
                         </fieldset>
    
                       
                    </section>
                </article>
            </section>
            <fieldset>
                <label for="information">
                    <h4 class="subtitle">Información detallada - <%= product.nombre %></h4>
                </label>
                <textarea name="information" id="information" cols="60" rows="5"><%= product.information %></textarea>
            </fieldset>
            
            <fieldset>
                <label for="packaging">
                    <h4 class="subtitle">Packaging</h4>
                </label>
                <textarea name="packaging" id="packaging" cols="120" rows="5"><%= product.packaging %></textarea>
            </fieldset>
            <button type="submit" class="form-button">Editar</button>
        </form>
        

    </main>

    <%- include('../includes/footer')  %>
</body>
</html>